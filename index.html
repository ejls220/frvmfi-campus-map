<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Campus AR Map</title>
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin:0; overflow:hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;">

      <!-- GPS Camera -->
      <a-camera gps-camera rotation-reader></a-camera>

      <!-- Helper function to create pointers -->
      <script>
        function createPointer(latitude, longitude, name, scale=2) {
          const scene = document.querySelector('a-scene');

          const entity = document.createElement('a-entity');
          entity.setAttribute('gps-entity-place', `latitude: ${latitude}; longitude: ${longitude};`);
          entity.setAttribute('gltf-model', 'scene.gltf');
          entity.setAttribute('scale', `${scale} ${scale} ${scale}`);
          entity.setAttribute('rotation', '-90 0 0');
          entity.setAttribute('look-at', '[gps-camera]');
          entity.setAttribute('visible', 'false'); // hide until model loads

          // Show only when model fully loaded
          entity.addEventListener('model-loaded', () => {
            entity.setAttribute('visible', 'true');
          });

          // Create label
          const label = document.createElement('a-text');
          label.setAttribute('value', name);
          label.setAttribute('color', '#FF0000');
          label.setAttribute('align', 'center');
          label.setAttribute('position', '0 1 0'); // above pointer
          label.setAttribute('look-at', '[gps-camera]');
          entity.appendChild(label);

          scene.appendChild(entity);
        }

        // Add campus pointers
        createPointer(11.024918, 124.011105, 'Library');     // Library
        createPointer(11.025500, 124.011500, 'Gym');         // Gym
        createPointer(11.024400, 124.010800, 'Cafeteria');   // Cafeteria
      </script>

    </a-scene>
  </body>
</html>
